var Ajax=function(){return function(b){var a=new XMLHttpRequest;a.open(b.method,b.url,!0);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b.data);a.onreadystatechange=function(){4==a.readyState&&(200!=a.status?b.error(a.responseText):b.success(a.responseText))}}}();
window.onload=function(){for(var b=document.querySelectorAll("form.ajax_form"),a=0;a<b.length;a++)b[a].onsubmit=function(a){a.preventDefault();a=this.querySelectorAll("input, textarea");var b="",c=this,e=null==document.querySelector("token")?"false":document.querySelector("token").innerHTML;if("undefined"!=typeof window["form_"+c.id].validate&&!1===window["form_"+c.id].validate(c))return!1;for(var d=0;d<a.length;d++)b+=null==a[d].getAttribute("name")?"":a[d].getAttribute("name")+"="+encodeURI(a[d].value)+
"&";b+="token="+encodeURI(e);new Ajax({method:c.getAttribute("method"),url:c.getAttribute("url"),data:b,success:function(a){window["form_"+c.id].success(a)},error:function(a){window["form_"+c.id].error(a)}})}};
