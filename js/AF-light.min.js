var Ajax=function(){return function(b){var a=new XMLHttpRequest;a.open(b.method,b.url,!0);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b.data);a.onreadystatechange=function(){4==a.readyState&&(200!=a.status?b.error(a.responseText):b.success(a.responseText))}}}();
document.addEventListener("DOMContentLoaded",function(){for(var b=document.querySelectorAll("form.ajax_form"),a=0;a<b.length;a++)b[a].onsubmit=function(a){a.preventDefault();a=this.querySelectorAll("input, textarea");var b="",d="form_"+this.getAttribute("id"),e=null==document.querySelector("token")?"false":document.querySelector("token").innerHTML;if("undefined"!=typeof window[d].validate&&!1===window[d].validate(this))return!1;for(var c=0;c<a.length;c++)b+=null==a[c].getAttribute("name")?"":a[c].getAttribute("name")+
"="+encodeURI(a[c].value)+"&";b+="token="+encodeURI(e);new Ajax({method:this.getAttribute("method"),url:this.getAttribute("url"),data:b,success:function(a){window[d].success(a)},error:function(a){window[d].error(a)}})}});